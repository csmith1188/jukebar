<div class="song-menu-container">
    <div class="song-menu-track-display">
        <img id="menuTrackImage" src="" alt="Album Cover" class="menu-album-cover">
        <div class="menu-track-info">
            <div id="menuTrackTitle" class="menu-track-title">Track Name</div>
            <div id="menuTrackArtist" class="menu-track-artist">Artist Name</div>
        </div>
    </div>
    
    <div class="menu-actions">
        <button class="menu-shield-button" id="skipShieldBtn">
            <img src="/img/skipShield.png" alt="Shield" class="shield-icon">
            <span class="button-text">Shield this song</span>
        </button>
        
        <button class="menu-ban-button" id="voteBanBtn">
            <i class="fas fa-ban"></i>
            <span class="button-text">Vote Ban</span>
        </button>
    </div>
</div>

<script>
// Listen for updateSongMenu event to populate track details
window.addEventListener('updateSongMenu', (event) => {
    const details = event.detail;
    document.getElementById('menuTrackImage').src = details.imageUrl || details.image;
    document.getElementById('menuTrackTitle').textContent = details.name;
    document.getElementById('menuTrackArtist').textContent = details.artist;
});

document.getElementById('skipShieldBtn').addEventListener('click', function() {
    // Get the currently playing track URI from the global variable
    if (!currentlyPlayingUri) {
        alert('No track currently playing!');
        return;
    }
    
    // Call the purchaseShield function from player.ejs
    if (typeof window.purchaseShield === 'function') {
        const trackUri = 'spotify:track:' + currentlyPlayingUri;
        window.purchaseShield(trackUri);
    } else {
        console.error('purchaseShield function not found');
        alert('Unable to purchase shield');
    }
});

document.getElementById('voteBanBtn').addEventListener('click', function() {
    // Vote ban button - no function as requested
    console.log('Vote ban clicked - no function implemented');
});
</script>